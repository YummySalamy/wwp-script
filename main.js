const _0x233e13=_0x5a8a;(function(_0x11fa99,_0x10a6a1){const _0x5664a0=_0x5a8a,_0x70ec=_0x11fa99();while(!![]){try{const _0x54a1e1=-parseInt(_0x5664a0(0xb4))/0x1+parseInt(_0x5664a0(0xcd))/0x2+-parseInt(_0x5664a0(0xda))/0x3+parseInt(_0x5664a0(0xed))/0x4*(parseInt(_0x5664a0(0xba))/0x5)+-parseInt(_0x5664a0(0xc6))/0x6*(-parseInt(_0x5664a0(0xaa))/0x7)+parseInt(_0x5664a0(0x80))/0x8*(parseInt(_0x5664a0(0x97))/0x9)+parseInt(_0x5664a0(0xc7))/0xa;if(_0x54a1e1===_0x10a6a1)break;else _0x70ec['push'](_0x70ec['shift']());}catch(_0x2d05ef){_0x70ec['push'](_0x70ec['shift']());}}}(_0x5b47,0x93476));function _0x5a8a(_0x499e8a,_0x407c27){const _0x5b47e7=_0x5b47();return _0x5a8a=function(_0x5a8a84,_0x4eadbc){_0x5a8a84=_0x5a8a84-0x7a;let _0x12475f=_0x5b47e7[_0x5a8a84];return _0x12475f;},_0x5a8a(_0x499e8a,_0x407c27);}import{CLOSE_ICON,MESSAGE_ICON,styles,aditionalStyles,chatbotWindowName,welcomeMessage,placeHolder}from'./assets.js';const iconUrl=localStorage['getItem'](_0x233e13(0xdb));function unescapeStr(_0x451f35){const _0x5e55b6=_0x233e13;return _0x451f35[_0x5e55b6(0x85)](/\\u[\dA-F]{4}/gi,function(_0x426ab7){const _0x7c85e7=_0x5e55b6;return String[_0x7c85e7(0x7e)](parseInt(_0x426ab7[_0x7c85e7(0x85)](/\\u/g,''),0x10));});}function _0x5b47(){const _0x22dbbc=['WEB','chatbotParameters','cgf','1488374aXytOo','getItem','createdAt','displayMessage','getPosition','Failed\x20to\x20create\x20chatbot\x20session','add','stringify','open','scrollTop','widgetIcon','></img>\x0a\x20\x20\x20\x20\x20\x20<h2>','bot','2709783MFhTOL','icon_url','injectStyles','forEach','querySelector','9999','messages','reaction','123456','preventDefault','https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600&display=swap','chatbotSessionId','WebSocket\x20error:','text/css','animation','initialize','setItem','style','https://prd-aichain-chatbot-messenger-qd5u6w2c6q-uc.a.run.app/web/webhook','8ZQUvPm','href','message-','Failed\x20to\x20send\x20message','#messageInput','fromCharCode','status','464648TJiloC','log','vrx','<div\x20class=\x22message-content\x22>','div','replace','data','random','sendMessage','widget__hidden','</h2>\x0a\x20\x20\x20\x20</header>\x0a\x0a\x20\x20\x20\x20<div\x20class=\x22chat-container\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22chat-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22chat-message\x20message-bot\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','getAttribute','body','onmessage','value','sort','toString','Error\x20sending\x20message:','classList','addMessageSession','closeIcon','.chat-container','position','36AbQdQl','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20<form\x20class=\x22input-container\x22>\x0a\x20\x20\x20\x20<div\x20class=\x22inputGroup\x22>\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20required=\x22\x22\x20autocomplete=\x22off\x22\x20id=\x22messageInput\x22\x20class=\x22form-input\x22>\x0a\x20\x20\x20\x20\x20\x20<label\x20for=\x22name\x22>','button','head','application/json','createWidgetContent','keys','widget__icon','appendChild','trim','createChatbotSession','createElement','widgetContainer','user','scrollHeight','length','innerHTML','https://prd-aichain-chatbot-upload-qd5u6w2c6q-uc.a.run.app/chatbot/sessions','NORMAL','3145611UbzkGm','chat-message','toggleOpen','type','POST','error','remove','json','30px','button__container','1040883GUATnp','widget__container','parse','addEventListener','substring','onerror','811265odbwNf','user_id','\x0a\x20\x20\x20\x20<header\x20class=\x22widget__header\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20class=\x27icon-style\x27\x20src=','chatpgt-token-xkaos2z','link','getElementById','</div>','.chat-box','thx','displayPreviousMessages','push','https://aichain-chat-api-v2-qd5u6w2c6q-uc.a.run.app/add_message','6zwPFem','7970080nPOQyt','answer','socket'];_0x5b47=function(){return _0x22dbbc;};return _0x5b47();}class MessageWidget{constructor(_0xaa8f87='bottom-right'){const _0x32cdc5=_0x233e13;this[_0x32cdc5(0x96)]=this[_0x32cdc5(0xd1)](_0xaa8f87),this['open']=![],this[_0x32cdc5(0xe9)](),this[_0x32cdc5(0xdc)](),this[_0x32cdc5(0xe0)]=[];}[_0x233e13(0x96)]='';[_0x233e13(0xd5)]=![];['widgetContainer']=null;[_0x233e13(0xd1)](_0x4dea08){const _0x4b244a=_0x233e13,_0x1fbf27=localStorage[_0x4b244a(0xce)]('user_id')!==null;if(!_0x1fbf27){const _0x470668=Math[_0x4b244a(0x87)]()['toString'](0x24)[_0x4b244a(0xb8)](0x2,0xf)+Math['random']()[_0x4b244a(0x90)](0x24)['substring'](0x2,0xf);localStorage[_0x4b244a(0xea)](_0x4b244a(0xbb),_0x470668);}const [_0x3e9f76,_0x4f433a]=_0x4dea08['split']('-');return{[_0x3e9f76]:_0x4b244a(0xb2),[_0x4f433a]:_0x4b244a(0xb2)};}async[_0x233e13(0xe9)](){const _0x56b837=_0x233e13,_0x2106e3=document[_0x56b837(0x9a)],_0xe85467=document['createElement'](_0x56b837(0xbe));_0xe85467['rel']='stylesheet',_0xe85467[_0x56b837(0xad)]=_0x56b837(0xe7),_0xe85467[_0x56b837(0x7a)]=_0x56b837(0xe4),_0x2106e3[_0x56b837(0x9f)](_0xe85467);const _0x2aad06=document[_0x56b837(0xa2)](_0x56b837(0x84));_0x2aad06[_0x56b837(0xeb)]['zIndex']=_0x56b837(0xdf),Object[_0x56b837(0x9d)](this[_0x56b837(0x96)])[_0x56b837(0xdd)](_0x45fd43=>_0x2aad06[_0x56b837(0xeb)][_0x45fd43]=this[_0x56b837(0x96)][_0x45fd43]),document['body'][_0x56b837(0x9f)](_0x2aad06);const _0x12a823=document['createElement'](_0x56b837(0x99));_0x12a823['classList'][_0x56b837(0xd3)](_0x56b837(0xb3));const _0x266864=document[_0x56b837(0xa2)]('span');_0x266864[_0x56b837(0xa7)]=MESSAGE_ICON,_0x266864[_0x56b837(0x92)][_0x56b837(0xd3)]('widget__icon'),this['widgetIcon']=_0x266864;const _0x226b20=document[_0x56b837(0xa2)]('span');_0x226b20[_0x56b837(0xa7)]=CLOSE_ICON,_0x226b20[_0x56b837(0x92)]['add'](_0x56b837(0x9e),_0x56b837(0x89)),this['closeIcon']=_0x226b20,_0x12a823[_0x56b837(0x9f)](this[_0x56b837(0xd7)]),_0x12a823[_0x56b837(0x9f)](this[_0x56b837(0x94)]),_0x12a823[_0x56b837(0xb7)]('click',this[_0x56b837(0xac)]['bind'](this)),this[_0x56b837(0xa3)]=document[_0x56b837(0xa2)](_0x56b837(0x84)),this['widgetContainer'][_0x56b837(0x92)]['add']('widget__hidden',_0x56b837(0xb5)),this[_0x56b837(0x9c)](),_0x2aad06[_0x56b837(0x9f)](this[_0x56b837(0xa3)]),_0x2aad06[_0x56b837(0x9f)](_0x12a823);const _0x4b0b9b=_0x2aad06['querySelector']('.button-45');_0x4b0b9b[_0x56b837(0xb7)]('click',async _0x1522b3=>{const _0xe1f46a=_0x56b837;_0x1522b3[_0xe1f46a(0xe3)]();const _0x252ffe=_0x2aad06['querySelector'](_0xe1f46a(0x7d)),_0x138510=_0x252ffe[_0xe1f46a(0x8e)][_0xe1f46a(0xa0)]();if(_0x138510==='')return;this[_0xe1f46a(0xd0)](_0x138510,_0xe1f46a(0xa4)),this[_0xe1f46a(0x88)](_0x138510),_0x252ffe[_0xe1f46a(0x8e)]='';});}async[_0x233e13(0xa1)](){const _0x52716b=_0x233e13,_0x20dc32=_0x52716b(0xa8),_0x225998=document[_0x52716b(0xbf)](_0x52716b(0xcb)),_0x271d33=_0x225998['getAttribute'](_0x52716b(0xcc)),_0x259601=_0x52716b(0xca),_0x1352c5=localStorage['getItem']('user_id'),_0x5664b5=_0x225998[_0x52716b(0x8b)](_0x52716b(0x82)),_0x5c9ce8=null;this['messages'][_0x52716b(0xa6)]=0x0;const _0x5a909f={'chatbot_id':_0x271d33,'channel_type':_0x259601,'user_id':_0x1352c5,'session_id':_0x1352c5};try{const _0x2e1d75=await fetch(_0x20dc32,{'method':'POST','headers':{'Content-Type':_0x52716b(0x9b)},'body':JSON['stringify'](_0x5a909f)});if(!_0x2e1d75['ok'])throw new Error(_0x52716b(0xd2));const _0x87811b=await _0x2e1d75[_0x52716b(0xb1)](),_0x539a3f=_0x87811b[_0x52716b(0xe0)];for(const _0xf138c4 in _0x539a3f){const _0x3b47e2=_0x539a3f[_0xf138c4];this[_0x52716b(0xe0)][_0x52716b(0xc4)](_0x3b47e2);}this[_0x52716b(0xe0)][_0x52716b(0x8f)]((_0x20b7b3,_0x4fed42)=>{const _0x3b6820=_0x52716b;return new Date(_0x20b7b3[_0x3b6820(0xcf)])-new Date(_0x4fed42[_0x3b6820(0xcf)]);});for(const _0x1f3103 of this[_0x52716b(0xe0)]){const _0x46b03c=_0x1f3103[_0x52716b(0xe1)]===_0x52716b(0xa9)?'bot':_0x52716b(0xa4);this[_0x52716b(0xc3)](_0x1f3103['question'],_0x52716b(0xa4)),this[_0x52716b(0xc3)](_0x1f3103['answer'],_0x52716b(0xd9));}this[_0x52716b(0xe5)]=_0x87811b['session_id'],localStorage[_0x52716b(0xea)](_0x52716b(0xe5),this[_0x52716b(0xe5)]);}catch(_0x38b65d){console[_0x52716b(0xaf)]('Error\x20creating\x20chatbot\x20session:',_0x38b65d);}}async[_0x233e13(0x93)](_0x3a6f48,_0x395af9){const _0xb2c3b4=_0x233e13,_0x3c2b07=unescapeStr(_0x395af9),_0x366dbd=_0xb2c3b4(0xc5),_0x423bb1=document[_0xb2c3b4(0xbf)](_0xb2c3b4(0xcb)),_0x262ee4=_0x423bb1[_0xb2c3b4(0x8b)]('cgf'),_0x3a8001=_0xb2c3b4(0xca),_0x13418a=_0x423bb1[_0xb2c3b4(0x8b)](_0xb2c3b4(0xc2)),_0x3f874d=localStorage['getItem'](_0xb2c3b4(0xe5)),_0x193b53=_0xb2c3b4(0xbd),_0x43f6e6={'token':_0x193b53},_0x5e82cb=null,_0x37a33b={'question':_0x3a6f48,'answer':_0x3c2b07,'metadata':{'chatbotId':_0x262ee4,'channelType':_0x3a8001,'userId':_0x13418a,'sessionId':_0x3f874d}};try{const _0x15d550=await fetch(_0x366dbd,{'method':_0xb2c3b4(0xae),'headers':{'Content-Type':_0xb2c3b4(0x9b),..._0x43f6e6},'body':JSON[_0xb2c3b4(0xd4)](_0x37a33b)});if(!_0x15d550['ok'])throw new Error(_0xb2c3b4(0xd2));const _0x4ca142=await _0x15d550[_0xb2c3b4(0xb1)]();}catch(_0x1b65b9){console['error']('Error\x20:',_0x1b65b9);}}['createWebSocketConnection'](){const _0x12e92c=_0x233e13;this[_0x12e92c(0xc9)]=new WebSocket('https://prd-aichain-chatbot-messenger-qd5u6w2c6q-uc.a.run.app/web/webhook'),this[_0x12e92c(0xc9)]['onopen']=()=>{console['log']('WebSocket\x20connection\x20opened');},this['socket'][_0x12e92c(0x8d)]=_0x174ca7=>{const _0x1c6209=_0x12e92c,_0x3f13f2=JSON[_0x1c6209(0xb6)](_0x174ca7[_0x1c6209(0x86)]);_0x3f13f2[_0x1c6209(0x7f)]&&this[_0x1c6209(0xd0)](_0x3f13f2[_0x1c6209(0xc8)],_0x1c6209(0xd9));},this[_0x12e92c(0xc9)]['onclose']=()=>{const _0x32b6e5=_0x12e92c;console[_0x32b6e5(0x81)]('WebSocket\x20connection\x20closed');},this['socket'][_0x12e92c(0xb9)]=_0x49cb80=>{const _0x1eb597=_0x12e92c;console[_0x1eb597(0xaf)](_0x1eb597(0xe6),_0x49cb80);};}async[_0x233e13(0x88)](_0x34ed3d){const _0x5bcb48=_0x233e13,_0x4605b9=document['getElementById'](_0x5bcb48(0xcb)),_0x2f3177=_0x4605b9['getAttribute'](_0x5bcb48(0x82)),_0xc4050e=_0x4605b9[_0x5bcb48(0x8b)](_0x5bcb48(0xc2)),_0x2162ca=localStorage['getItem'](_0x5bcb48(0xbb)),_0xb200dd={'session_id':_0x2f3177,'owner_id':_0xc4050e,'user_id':_0x2162ca,'text':_0x34ed3d};try{const _0x171775=await fetch(_0x5bcb48(0xec),{'method':_0x5bcb48(0xae),'headers':{'Content-Type':_0x5bcb48(0x9b),'Token':_0x5bcb48(0xe2)},'body':JSON['stringify'](_0xb200dd)});if(!_0x171775['ok'])throw new Error(_0x5bcb48(0x7c));const _0x4c1105=await _0x171775[_0x5bcb48(0xb1)]();_0x4c1105[_0x5bcb48(0x7f)]&&this[_0x5bcb48(0xd0)](_0x4c1105[_0x5bcb48(0xc8)],_0x5bcb48(0xd9));}catch(_0xe6391e){console[_0x5bcb48(0xaf)](_0x5bcb48(0x91),_0xe6391e);}}['displayMessage'](_0x555669,_0x24f93a){const _0x3fb58c=_0x233e13,_0x4d96fd=document[_0x3fb58c(0xde)](_0x3fb58c(0xc1)),_0x4656f6=document[_0x3fb58c(0xde)](_0x3fb58c(0x95)),_0x5962d3=document[_0x3fb58c(0xa2)](_0x3fb58c(0x84));_0x5962d3['classList'][_0x3fb58c(0xd3)](_0x3fb58c(0xab),_0x3fb58c(0x7b)+_0x24f93a),_0x24f93a===_0x3fb58c(0xd9)&&(_0x5962d3['style'][_0x3fb58c(0xe8)]='slideInFromLeft\x200.5s'),_0x5962d3['innerHTML']=_0x3fb58c(0x83)+unescapeStr(_0x555669)+_0x3fb58c(0xc0),_0x4d96fd[_0x3fb58c(0x9f)](_0x5962d3),_0x4d96fd[_0x3fb58c(0xd6)]=_0x4d96fd[_0x3fb58c(0xa5)],_0x4656f6['scrollTop']=_0x4656f6[_0x3fb58c(0xa5)];}[_0x233e13(0xc3)](_0x4a4c1b,_0x5ad4dc){const _0x23d08e=_0x233e13,_0x43cc20=document[_0x23d08e(0xde)](_0x23d08e(0xc1)),_0x439310=document[_0x23d08e(0xde)](_0x23d08e(0x95)),_0x256651=document[_0x23d08e(0xa2)](_0x23d08e(0x84));_0x256651[_0x23d08e(0x92)]['add'](_0x23d08e(0xab),_0x23d08e(0x7b)+_0x5ad4dc),_0x256651[_0x23d08e(0xa7)]=_0x23d08e(0x83)+unescapeStr(_0x4a4c1b)+'</div>',_0x43cc20[_0x23d08e(0x9f)](_0x256651),_0x43cc20['scrollTop']=_0x43cc20[_0x23d08e(0xa5)],_0x439310[_0x23d08e(0xd6)]=_0x439310[_0x23d08e(0xa5)],_0x43cc20[_0x23d08e(0xd6)]=_0x43cc20[_0x23d08e(0xa5)];}[_0x233e13(0x9c)](){const _0x256a51=_0x233e13;this[_0x256a51(0xa3)]['innerHTML']=_0x256a51(0xbc)+iconUrl+_0x256a51(0xd8)+chatbotWindowName+_0x256a51(0x8a)+welcomeMessage+_0x256a51(0x98)+placeHolder+'</label>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<button\x20class=\x22button-45\x22\x20role=\x22button\x22\x20type=\x22submit\x22>Enviar</button>\x0a\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20<footer\x20class=\x22poweredByContainer\x22>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22footer__text\x22>Powered\x20by\x20<a\x20class=\x27nubot-link\x27\x20href=\x27https://nubot.io\x27\x20target=\x27_blank\x27>nubot.io</a></p>\x0a\x20\x20\x20\x20</footer>\x0a\x20\x20\x20\x20';}[_0x233e13(0xdc)](){const _0x20714d=_0x233e13,_0x1df55d=document['createElement'](_0x20714d(0xeb)),_0x401159=document['createElement'](_0x20714d(0xeb));_0x1df55d['innerHTML']=styles[_0x20714d(0x85)](/^\s+|\n/gm,''),_0x401159[_0x20714d(0xa7)]=aditionalStyles['replace'](/^\s+|\n/gm,''),document['head'][_0x20714d(0x9f)](_0x1df55d),document[_0x20714d(0x8c)][_0x20714d(0x9f)](_0x401159);}['toggleOpen'](){const _0x3ea3b1=_0x233e13;this[_0x3ea3b1(0xd5)]=!this['open'],this['open']?(this[_0x3ea3b1(0xd7)][_0x3ea3b1(0x92)]['add'](_0x3ea3b1(0x89)),this[_0x3ea3b1(0x94)][_0x3ea3b1(0x92)][_0x3ea3b1(0xb0)](_0x3ea3b1(0x89)),this[_0x3ea3b1(0xa3)]['classList'][_0x3ea3b1(0xb0)]('widget__hidden'),this[_0x3ea3b1(0xa1)]()):(this[_0x3ea3b1(0x9c)](),this['widgetIcon'][_0x3ea3b1(0x92)][_0x3ea3b1(0xb0)](_0x3ea3b1(0x89)),this[_0x3ea3b1(0x94)][_0x3ea3b1(0x92)]['add'](_0x3ea3b1(0x89)),this['widgetContainer'][_0x3ea3b1(0x92)]['add'](_0x3ea3b1(0x89)));}}function initializeWidget(){return new MessageWidget();}initializeWidget();